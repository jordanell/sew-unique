gallery = {
  NUM_PHOTOS: 9
  index: 0

  increase: ->
    if @index < @NUM_PHOTOS-1
      ++@index
    else
      @index = 0

  decrease: ->
    if @index > 0
      --@index
    else
      @index = @NUM_PHOTOS-1
}

setGalleryPhoto = (index) ->
  gallery.index = parseInt(index)

  # Since this is dynamic we need the full URL
  image = "https://s3-us-west-2.amazonaws.com/sewunique-production/landing/gallery-#{index}.jpg"

  # Set the photo
  $('#lightbox img').attr('src', image)

launchGalleryAt = (index) ->
  setGalleryPhoto(index)

  # Turn lightbox on
  $('#lightbox').css('display', 'block')

closeGallery = ->
  # Turn off the light box
  $('#lightbox').css('display', 'none')

$(document).ready ->
  $('.gallery-thumbnail img').click (e) ->
    index = e.currentTarget.attributes['data-index'].value
    launchGalleryAt(index);

  $('#lightbox .left').click (e) =>
    e.stopPropagation()
    setGalleryPhoto(gallery.decrease())

  $('#lightbox .right').click (e) =>
    e.stopPropagation()
    setGalleryPhoto(gallery.increase())

  $('#lightbox img').click (e) ->
    e.stopPropagation()
    setGalleryPhoto(gallery.increase())

  $('#lightbox .close').click (e) ->
    e.stopPropagation()
    closeGallery()

  $('#lightbox').click (e) ->
    closeGallery()

  $(document).keyup (e) ->
    if e.keyCode is 27
      closeGallery()

